<!doctype html>
<html class="docs-version-v1.8.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">CloudTower APIs General Guide | CloudTowerr APIs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.smartx.com//en/v1.8.0/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="v1.8.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-v1.8.0"><meta data-react-helmet="true" property="og:title" content="CloudTower APIs General Guide | CloudTowerr APIs"><meta data-react-helmet="true" name="description" content="Welcome to CloudTower API! Please read this General Guide carefully."><meta data-react-helmet="true" property="og:description" content="Welcome to CloudTower API! Please read this General Guide carefully."><link data-react-helmet="true" rel="icon" href='../../en/img/smartx.svg'><link data-react-helmet="true" rel="canonical" href="https://www.smartx.com//en/v1.8.0/"><link data-react-helmet="true" rel="alternate" href="https://www.smartx.com//v1.8.0/" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://www.smartx.com//en/v1.8.0/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.smartx.com//v1.8.0/" hreflang="x-default"><link rel="stylesheet" href='../../en/assets/css/main.fb1b17c2.css'>
<link rel="preload" href='../../en/assets/js/main.bundle.js' as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href='../../en/index.html'><div class="navbar__logo"><img src='../../en/img/smartx.svg' alt="Smartx - Make IT simple" class="themedImage_TMUO themedImage--light_4Vu1"><img src='../../en/img/smartx.svg' alt="Smartx - Make IT simple" class="themedImage_TMUO themedImage--dark_uzRr"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href='../../en/v1.8.0/'>v1.8.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href='../../en/index.html'>v1.9.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href='../../en/v1.8.0/'>v1.8.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href='../../v1.8.0/' target="_self" rel="noopener noreferrer" class="dropdown__link">‰∏≠Êñá</a></li><li><a href='../../en/v1.8.0/' target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href='../../en/v1.8.0/'>CloudTower APIs General Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href='../../en/v1.8.0/all/index.html'>Category Definition</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href='../../en/v1.8.0/download/index.html'>Download SDK</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->CloudTowerr APIs<!-- --> <b>v1.8.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href='../../en/index.html'>latest version</a></b> (<!-- -->v1.9.0<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->v1.8.0</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CloudTower APIs General Guide</h1></header><p>Welcome to CloudTower API! Please read this General Guide carefully.</p><ul><li>You can use the CloudTower APIs to call the different types of resources that are managed by CloudTower.</li><li>This document is written following the OpenApi Specification v3.0.0.</li><li>For a better readability, this API document is divided into multiple modules. You can select a particular module by clicking the drop-down box at the upper-right corner of the page, for example, ‚ÄúUser Management‚Äù, ‚ÄúMultiple Cluster Management‚Äù, etc.</li><li>The CloudTower APIs provide very flexible request parameter types, which are convenient for batch operations and conditional queries. Considering the flexibility of parameters and the convenience of usage, such as the <code>GET</code> request has some restrictions, this API document only uses the <code>POST</code> request to send data in json format.</li></ul><p>‚Äã## How to Call
‚Äã
The CloudTower APIs are developed following the OpenApi Specification v3.0.0., and can be called using cURL or any HTTP client. </p><p>The APIs provide examples for each specific interface, including request parameters and return results. You can modify the example parameters to call the API.
‚Äã
The APIs also provide detailed parameter types for the schema of each interface. For more details, please refer to the example and schema of each interface.
‚Äã
Click <code>Try it out</code> to make an API call in the real environment and connect to the services by selecting the upper drop-down box of <code>Servers</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="authentication">Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">‚Äã</a></h2><blockquote><p>Except for login, all the requests need to add the authentication field.
‚Äã
The CloudTower APIs make authentication by passing the <code>Authorization</code> field in the headers. Here is how to get a token, using cURL as an example:</p><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X &#x27;POST&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &#x27;http://localhost:3000/v2/api/login&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -H &#x27;accept: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -H &#x27;content-language: en-US&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;username&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;source&quot;: &quot;LOCAL&quot;Ôºå</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;password&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And here is what can be obtained:</p><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;task_id&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;token&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>data.token</code> is the authentication field to be used, you can just add it to <code>header.Authorization</code>.</p><ul><li>If called via cURL, add <code>-H &#x27;Authorization: token-string&#x27;</code>.</li><li>If called via the swagger api documentation page, click the <code>Authorization</code> button and add <code>data.token</code> to <code>value</code>.</li></ul></blockquote><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pagination-query">Pagination Query<a class="hash-link" href="#pagination-query" title="Direct link to heading">‚Äã</a></h2><p>‚Äã</p><ul><li><strong>after</strong> string type, optional. Fill in a single resource‚Äôs id, representing to acquire resources after this resource and not including it.</li><li><strong>before</strong> string type, optional. Fill in a single resource‚Äôs id, representing to acquire resources before this resource but not including it.</li><li><strong>first</strong> number type, optional. It can be used together with after / before, representing the number of data acquired after the specified resource.</li><li><strong>last</strong> number type, optional. It can be used together with after / before, representing the number of data acquired before the specified resource.</li><li><strong>skip</strong> number type, optional. It can be used together with after / beforeÔºårepresenting to start a query after skipping n items of the specified resource.</li><li><strong>orderBy</strong> enumeration type, all the values can be queried in the respective schema of the api. It represents the order of query results, usually including descending or ascending order of all the fields of the resource, i.e., <code>_DESC</code> or <code>_ASC</code>.</li><li><strong>where</strong> conditional query, representing to query the resources that meet the conditions. The specific type of where can be found in the schema of the corresponding api. Take <code>/get-users</code> as an example, where is <code>UserWhereInput</code>, which explains the query conditions of the id value.</li></ul><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is not 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_not</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is within the given range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_in</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;4&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is not within the given range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_not_in</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;4&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is less than 1, here lt = less than (&lt;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_lt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is less than or equal to 1, here lte = less than or equals (‚â§)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_lte</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is greater than 1, here gt = greater than (&gt;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_gt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id is greater than or equal to 1, here gte = greater than or equals ( ‚â•)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_gte</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id value contains 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_contains</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id value does not contain 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_not_contains</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id value starts with 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_starts_with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id value does not start with 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_not_starts_with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id value ends with 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_ends_with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># The resource whose id value does not end with 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">id_not_ends_with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚Äã</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Take the ‚Äúprisma Official Document‚Äù(<a href="https://v1.prisma.io/docs/1.34/prisma-client/basic-data-access/reading-data-JAVASCRIPT-rsc2/#pagination" target="_blank" rel="noopener noreferrer">https://v1.prisma.io/docs/1.34/prisma-client/basic-data-access/reading-data-JAVASCRIPT-rsc2/#pagination</a>) as an example, to further explain the query conditions of <code>after, before,first, last, skip</code>.
‚Äã</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">![first](https://i.imgur.com/O1Jj3Z2.png=x120)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">``` graphql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Get the first 3 records in the resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{ first: 3 }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://i.imgur.com/PpI5X0X.png=x120" alt="first-and-skip"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the first 5 records after the 5th one, i.e., the 6th ~ 10th records</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">skip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>‚Äã
<img src="https://i.imgur.com/pkuYCrV.png=x120" alt="last"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the last 3 records in the resource</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">last</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>‚Äã<img src="https://i.imgur.com/iSl9Y07.png=x120" alt="last-and-skip"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the 7 records before the last but three record, i.e., the 4th ~ 10th before the last record</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">last</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">skip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚Äã</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://i.imgur.com/InYSSkQ.png=x120" alt="after-first"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the first 3 records after the record with id of cixnen24p33lo0143bexvr52n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">after</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cixnen24p33lo0143bexvr52n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token attr-name" style="color:#00a4db">first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://i.imgur.com/u4WEAJv.png=x120" alt="after-skip-first"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the first 5 records after the 3rd record after the record with id of cixnen24p33lo0143bexvr52n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">after</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &#x27;cixnen24p33lo0143bexvr52n&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">skip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://i.imgur.com/306eghw.png=x120" alt="before-last"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the first 5 records before the record with id of cixnen24p33lo0143bexvr52n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">last</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">before</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &#x27;cixnen24p33lo0143bexvr52n&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="https://i.imgur.com/iZGUiHJ.png=x120" alt="before-skip-last"></p><div class="codeBlockContainer_J+bg language-graphql theme-code-block"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get the 3 records before the last but five record before the record with id of cixnen24p33lo0143bexvr52n, i.e., the 6th ~ 9th records from the record with that id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">last</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">before</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &#x27;cixnen24p33lo0143bexvr52n&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">skip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="asynchronous-task">Asynchronous Task<a class="hash-link" href="#asynchronous-task" title="Direct link to heading">‚Äã</a></h2><p>‚Äã
When you use CloudTower to manage resources, most of the time, the actual operations are put into an asynchronous task to execute, therefore, after an API that includes such operations as creation, deletion, and modification returns a result, the corresponding operations may still be in execution, and the status of the operations will be displayed by the corresponding asynchronous task.
‚Äã
In order to keep API invocations concise and consistent, this type of APIs will return the asynchronous task id as a parameter of <code>{ task_id: string }</code>.
‚Äã
After obtaining the <code>task_id</code>, you can further query the status and results of the asynchronous task via <code>/get-tasks</code>. Refer to <code>Task Center</code>for specific parameter types.</p><p>Please note that when a resource executes an asynchronous task, only the resource id is credible and stable, but the other fields of this resource and the fields of its associated resources could be modified in the asynchronous task. If you need to perform query or other operations on these fields, please use the resource id to perform operations again after the asynchronous task is completed.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="an-example-of-cloudtower-apis-virtual-machine-backup">An Example of CloudTower APIs: Virtual Machine Backup<a class="hash-link" href="#an-example-of-cloudtower-apis-virtual-machine-backup" title="Direct link to heading">‚Äã</a></h2><p>‚Äã</p><ol><li>Obtain the basic information of the virtual machine, for example, query by virtual machine name to obtain the virtual machine‚Äôs id.</li></ol><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location --request POST &#x27;http://192.168.31.209/v2/api/get-vms&#x27; \ --header &#x27;Authorization: YOUR_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data-raw &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;where&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;name&quot;: &quot;YOUR_VM_NAME&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} }&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>‚Äã
2. Create a virtual machine snapshot. When the virtual machine is installed with the VMTools and the VMTools is startedÔºåthe consistent_type can use FILE_SYSTEM_CONSISTENT  to represent a consistency snapshot of the file system. This operation will return task_id, i.e., the id of the asynchronous task; in the meanwhile, will return snapshot id, i.e., the id of the snapshot.</p><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">‚Äãcurl --location --request POST &#x27;http://192.168.31.209/v2/api/create-vm-snapshot&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Authorization: YOUR_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data-raw &#x27;{ &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} }&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>Polling until the task is completed.(The status is SUCCESSED.)</li></ol><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location --request POST &#x27;http://192.168.31.209/v2/api/get-tasks&#x27; \ --header &#x27;Authorization: YOUR_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data-raw &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;where&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;id&quot;: &quot;STEP_2_TASK_ID&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} }&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>‚Äã
4. Query the snapshot by using the snapshot is obtained in Step 2.
The vm_disks in the return value is the virtual disk included in the snapshot, the type of DISK represents a corresponding volume, and the type of CD_ROM can be ignored.
The snapshot_local_id of vm_disk is the name of the LUN snapshot corresponding to this snapshot.</p><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location --request POST &#x27;http://192.168.31.209/v2/api/get-vm-snapshots&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Authorization: YOUR_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data-raw &#x27;{ &quot;where&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;id&quot;: &quot;STEP_2_SNAPSHOT_ID&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>‚Äã
5. Query the corresponding LUN snapshot by using the LUN snapshot name.
The local_id of each LUN snapshot is the identifier in ZBS and can be used by ZBS APIs for more interactive operations.</p><div class="codeBlockContainer_J+bg language-ssh theme-code-block"><div class="codeBlockContent_csEI ssh"><pre tabindex="0" class="prism-code language-ssh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">‚Äãcurl --location --request POST &#x27;http://192.168.31.209/v2/api/get-iscsi-lun- snapshots&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Authorization: YOUR_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--data-raw &#x27;{ &quot;where&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;name_in&quot;: [&quot;STEP_4_SNAPSHOT_LOCAL_ID_1&quot;, &quot;STEP_4_SNAPSHOT_LOCAL_ID_2&quot;] }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href='../../en/v1.8.0/all/index.html'><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">All</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li><li><a href="#pagination-query" class="table-of-contents__link toc-highlight">Pagination Query</a></li><li><a href="#asynchronous-task" class="table-of-contents__link toc-highlight">Asynchronous Task</a></li><li><a href="#an-example-of-cloudtower-apis-virtual-machine-backup" class="table-of-contents__link toc-highlight">An Example of CloudTower APIs: Virtual Machine Backup</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 SmartX Inc</div></div></div></footer></div>
<script src='../../en/assets/js/main.bundle.js'></script>
</body>
</html>